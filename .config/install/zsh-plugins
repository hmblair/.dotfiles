#!/usr/bin/env zsh

# Check dependencies
if ! command -v git &>/dev/null; then
    echo "Error: git is required but not installed"
    return 1
fi

ZSH_PLUGIN_DIR="$LOCAL_PREFIX/zsh"
mkdir -p "$ZSH_PLUGIN_DIR"

if [[ ! -d "$ZSH_PLUGIN_DIR/zsh-syntax-highlighting" ]]; then
    git clone https://github.com/zsh-users/zsh-syntax-highlighting.git \
        "$ZSH_PLUGIN_DIR/zsh-syntax-highlighting" || return 1
else
    (cd "$ZSH_PLUGIN_DIR/zsh-syntax-highlighting" && git pull --quiet 2>/dev/null &)
fi

if [[ ! -d "$ZSH_PLUGIN_DIR/zsh-autosuggestions" ]]; then
    git clone https://github.com/zsh-users/zsh-autosuggestions.git \
        "$ZSH_PLUGIN_DIR/zsh-autosuggestions" || return 1
else
    (cd "$ZSH_PLUGIN_DIR/zsh-autosuggestions" && git pull --quiet 2>/dev/null &)
fi
